function d3_svg_arcInnerRadius(a){return a.innerRadius}function d3_svg_arcOuterRadius(a){return a.outerRadius}function d3_svg_arcStartAngle(a){return a.startAngle}function d3_svg_arcEndAngle(a){return a.endAngle}function d3_svg_line(a){function h(e){function o(){h.push("M",f(a(i),g))}var h=[],i=[],j=-1,k=e.length,l,m=d3_functor(b),n=d3_functor(c);while(++j<k)d.call(this,l=e[j],j)?i.push([+m.call(this,l,j),+n.call(this,l,j)]):i.length&&(o(),i=[]);return i.length&&o(),h.length?h.join(""):null}var b=d3_svg_lineX,c=d3_svg_lineY,d=d3_true,e=d3_svg_lineInterpolatorDefault,f=d3_svg_lineLinear,g=.7;return h.x=function(a){return arguments.length?(b=a,h):b},h.y=function(a){return arguments.length?(c=a,h):c},h.defined=function(a){return arguments.length?(d=a,h):d},h.interpolate=function(a){return arguments.length?(d3_svg_lineInterpolators.has(a+="")||(a=d3_svg_lineInterpolatorDefault),f=d3_svg_lineInterpolators.get(e=a),h):e},h.tension=function(a){return arguments.length?(g=a,h):g},h}function d3_svg_lineX(a){return a[0]}function d3_svg_lineY(a){return a[1]}function d3_svg_lineLinear(a){var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];while(++b<c)e.push("L",(d=a[b])[0],",",d[1]);return e.join("")}function d3_svg_lineStepBefore(a){var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];while(++b<c)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function d3_svg_lineStepAfter(a){var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];while(++b<c)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function d3_svg_lineCardinalOpen(a,b){return a.length<4?d3_svg_lineLinear(a):a[1]+d3_svg_lineHermite(a.slice(1,a.length-1),d3_svg_lineCardinalTangents(a,b))}function d3_svg_lineCardinalClosed(a,b){return a.length<3?d3_svg_lineLinear(a):a[0]+d3_svg_lineHermite((a.push(a[0]),a),d3_svg_lineCardinalTangents([a[a.length-2]].concat(a,[a[1]]),b))}function d3_svg_lineCardinal(a,b,c){return a.length<3?d3_svg_lineLinear(a):a[0]+d3_svg_lineHermite(a,d3_svg_lineCardinalTangents(a,b))}function d3_svg_lineHermite(a,b){if(b.length<1||a.length!=b.length&&a.length!=b.length+2)return d3_svg_lineLinear(a);var c=a.length!=b.length,d="",e=a[0],f=a[1],g=b[0],h=g,i=1;c&&(d+="Q"+(f[0]-g[0]*2/3)+","+(f[1]-g[1]*2/3)+","+f[0]+","+f[1],e=a[1],i=2);if(b.length>1){h=b[1],f=a[i],i++,d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1];for(var j=2;j<b.length;j++,i++)f=a[i],h=b[j],d+="S"+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1]}if(c){var k=a[i];d+="Q"+(f[0]+h[0]*2/3)+","+(f[1]+h[1]*2/3)+","+k[0]+","+k[1]}return d}function d3_svg_lineCardinalTangents(a,b){var c=[],d=(1-b)/2,e,f=a[0],g=a[1],h=1,i=a.length;while(++h<i)e=f,f=g,g=a[h],c.push([d*(g[0]-e[0]),d*(g[1]-e[1])]);return c}function d3_svg_lineBasis(a){if(a.length<3)return d3_svg_lineLinear(a);var b=1,c=a.length,d=a[0],e=d[0],f=d[1],g=[e,e,e,(d=a[1])[0]],h=[f,f,f,d[1]],i=[e,",",f];d3_svg_lineBasisBezier(i,g,h);while(++b<c)d=a[b],g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),d3_svg_lineBasisBezier(i,g,h);b=-1;while(++b<2)g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),d3_svg_lineBasisBezier(i,g,h);return i.join("")}function d3_svg_lineBasisOpen(a){if(a.length<4)return d3_svg_lineLinear(a);var b=[],c=-1,d=a.length,e,f=[0],g=[0];while(++c<3)e=a[c],f.push(e[0]),g.push(e[1]);b.push(d3_svg_lineDot4(d3_svg_lineBasisBezier3,f)+","+d3_svg_lineDot4(d3_svg_lineBasisBezier3,g)),--c;while(++c<d)e=a[c],f.shift(),f.push(e[0]),g.shift(),g.push(e[1]),d3_svg_lineBasisBezier(b,f,g);return b.join("")}function d3_svg_lineBasisClosed(a){var b,c=-1,d=a.length,e=d+4,f,g=[],h=[];while(++c<4)f=a[c%d],g.push(f[0]),h.push(f[1]);b=[d3_svg_lineDot4(d3_svg_lineBasisBezier3,g),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,h)],--c;while(++c<e)f=a[c%d],g.shift(),g.push(f[0]),h.shift(),h.push(f[1]),d3_svg_lineBasisBezier(b,g,h);return b.join("")}function d3_svg_lineBundle(a,b){var c=a.length-1,d=a[0][0],e=a[0][1],f=a[c][0]-d,g=a[c][1]-e,h=-1,i,j;while(++h<=c)i=a[h],j=h/c,i[0]=b*i[0]+(1-b)*(d+j*f),i[1]=b*i[1]+(1-b)*(e+j*g);return d3_svg_lineBasis(a)}function d3_svg_lineDot4(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function d3_svg_lineBasisBezier(a,b,c){a.push("C",d3_svg_lineDot4(d3_svg_lineBasisBezier1,b),",",d3_svg_lineDot4(d3_svg_lineBasisBezier1,c),",",d3_svg_lineDot4(d3_svg_lineBasisBezier2,b),",",d3_svg_lineDot4(d3_svg_lineBasisBezier2,c),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,b),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,c))}function d3_svg_lineSlope(a,b){return(b[1]-a[1])/(b[0]-a[0])}function d3_svg_lineFiniteDifferences(a){var b=0,c=a.length-1,d=[],e=a[0],f=a[1],g=d[0]=d3_svg_lineSlope(e,f);while(++b<c)d[b]=g+(g=d3_svg_lineSlope(e=f,f=a[b+1]));return d[b]=g,d}function d3_svg_lineMonotoneTangents(a){var b=[],c,d,e,f,g=d3_svg_lineFiniteDifferences(a),h=-1,i=a.length-1;while(++h<i)c=d3_svg_lineSlope(a[h],a[h+1]),Math.abs(c)<1e-6?g[h]=g[h+1]=0:(d=g[h]/c,e=g[h+1]/c,f=d*d+e*e,f>9&&(f=c*3/Math.sqrt(f),g[h]=f*d,g[h+1]=f*e));h=-1;while(++h<=i)f=(a[Math.min(i,h+1)][0]-a[Math.max(0,h-1)][0])/(6*(1+g[h]*g[h])),b.push([f||0,g[h]*f||0]);return b}function d3_svg_lineMonotone(a){return a.length<3?d3_svg_lineLinear(a):a[0]+d3_svg_lineHermite(a,d3_svg_lineMonotoneTangents(a))}function d3_svg_lineRadial(a){var b,c=-1,d=a.length,e,f;while(++c<d)b=a[c],e=b[0],f=b[1]+d3_svg_arcOffset,b[0]=e*Math.cos(f),b[1]=e*Math.sin(f);return a}function d3_svg_area(a){function l(g){function x(){l.push("M",h(a(n),k),j,i(a(m.reverse()),k),"Z")}var l=[],m=[],n=[],o=-1,p=g.length,q,r=d3_functor(b),s=d3_functor(d),t=b===c?function(){return v}:d3_functor(c),u=d===e?function(){return w}:d3_functor(e),v,w;while(++o<p)f.call(this,q=g[o],o)?(m.push([v=+r.call(this,q,o),w=+s.call(this,q,o)]),n.push([+t.call(this,q,o),+u.call(this,q,o)])):m.length&&(x(),m=[],n=[]);return m.length&&x(),l.length?l.join(""):null}var b=d3_svg_lineX,c=d3_svg_lineX,d=0,e=d3_svg_lineY,f=d3_true,g=d3_svg_lineInterpolatorDefault,h=d3_svg_lineLinear,i=d3_svg_lineLinear,j="L",k=.7;return l.x=function(a){return arguments.length?(b=c=a,l):c},l.x0=function(a){return arguments.length?(b=a,l):b},l.x1=function(a){return arguments.length?(c=a,l):c},l.y=function(a){return arguments.length?(d=e=a,l):e},l.y0=function(a){return arguments.length?(d=a,l):d},l.y1=function(a){return arguments.length?(e=a,l):e},l.defined=function(a){return arguments.length?(f=a,l):f},l.interpolate=function(a){return arguments.length?(d3_svg_lineInterpolators.has(a+="")||(a=d3_svg_lineInterpolatorDefault),h=d3_svg_lineInterpolators.get(g=a),i=h.reverse||h,j=/-closed$/.test(a)?"M":"L",l):g},l.tension=function(a){return arguments.length?(k=a,l):k},l}function d3_svg_chordSource(a){return a.source}function d3_svg_chordTarget(a){return a.target}function d3_svg_chordRadius(a){return a.radius}function d3_svg_chordStartAngle(a){return a.startAngle}function d3_svg_chordEndAngle(a){return a.endAngle}function d3_svg_diagonalProjection(a){return[a.x,a.y]}function d3_svg_diagonalRadialProjection(a){return function(){var b=a.apply(this,arguments),c=b[0],d=b[1]+d3_svg_arcOffset;return[c*Math.cos(d),c*Math.sin(d)]}}function d3_svg_symbolSize(){return 64}function d3_svg_symbolType(){return"circle"}function d3_svg_symbolCircle(a){var b=Math.sqrt(a/Math.PI);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+ -b+"A"+b+","+b+" 0 1,1 0,"+b+"Z"}function d3_svg_axisX(a,b){a.attr("transform",function(a){return"translate("+b(a)+",0)"})}function d3_svg_axisY(a,b){a.attr("transform",function(a){return"translate(0,"+b(a)+")"})}function d3_svg_axisSubdivide(a,b,c){e=[];if(c&&b.length>1){var d=d3_scaleExtent(a.domain()),e,f=-1,g=b.length,h=(b[1]-b[0])/++c,i,j;while(++f<g)for(i=c;--i>0;)(j=+b[f]-i*h)>=d[0]&&e.push(j);for(--f,i=0;++i<c&&(j=+b[f]+i*h)<d[1];)e.push(j)}return e}d3.svg={},d3.svg.arc=function(){function e(){var e=a.apply(this,arguments),f=b.apply(this,arguments),g=c.apply(this,arguments)+d3_svg_arcOffset,h=d.apply(this,arguments)+d3_svg_arcOffset,i=(h<g&&(i=g,g=h,h=i),h-g),j=i<Math.PI?"0":"1",k=Math.cos(g),l=Math.sin(g),m=Math.cos(h),n=Math.sin(h);return i>=d3_svg_arcMax?e?"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+ -f+"A"+f+","+f+" 0 1,1 0,"+f+"M0,"+e+"A"+e+","+e+" 0 1,0 0,"+ -e+"A"+e+","+e+" 0 1,0 0,"+e+"Z":"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+ -f+"A"+f+","+f+" 0 1,1 0,"+f+"Z":e?"M"+f*k+","+f*l+"A"+f+","+f+" 0 "+j+",1 "+f*m+","+f*n+"L"+e*m+","+e*n+"A"+e+","+e+" 0 "+j+",0 "+e*k+","+e*l+"Z":"M"+f*k+","+f*l+"A"+f+","+f+" 0 "+j+",1 "+f*m+","+f*n+"L0,0"+"Z"}var a=d3_svg_arcInnerRadius,b=d3_svg_arcOuterRadius,c=d3_svg_arcStartAngle,d=d3_svg_arcEndAngle;return e.innerRadius=function(b){return arguments.length?(a=d3_functor(b),e):a},e.outerRadius=function(a){return arguments.length?(b=d3_functor(a),e):b},e.startAngle=function(a){return arguments.length?(c=d3_functor(a),e):c},e.endAngle=function(a){return arguments.length?(d=d3_functor(a),e):d},e.centroid=function(){var e=(a.apply(this,arguments)+b.apply(this,arguments))/2,f=(c.apply(this,arguments)+d.apply(this,arguments))/2+d3_svg_arcOffset;return[Math.cos(f)*e,Math.sin(f)*e]},e};var d3_svg_arcOffset=-Math.PI/2,d3_svg_arcMax=2*Math.PI-1e-6;d3.svg.line=function(){return d3_svg_line(d3_identity)};var d3_svg_lineInterpolatorDefault="linear",d3_svg_lineInterpolators=d3.map({linear:d3_svg_lineLinear,"step-before":d3_svg_lineStepBefore,"step-after":d3_svg_lineStepAfter,basis:d3_svg_lineBasis,"basis-open":d3_svg_lineBasisOpen,"basis-closed":d3_svg_lineBasisClosed,bundle:d3_svg_lineBundle,cardinal:d3_svg_lineCardinal,"cardinal-open":d3_svg_lineCardinalOpen,"cardinal-closed":d3_svg_lineCardinalClosed,monotone:d3_svg_lineMonotone}),d3_svg_lineBasisBezier1=[0,2/3,1/3,0],d3_svg_lineBasisBezier2=[0,1/3,2/3,0],d3_svg_lineBasisBezier3=[0,1/6,2/3,1/6];d3.svg.line.radial=function(){var a=d3_svg_line(d3_svg_lineRadial);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a},d3_svg_lineStepBefore.reverse=d3_svg_lineStepAfter,d3_svg_lineStepAfter.reverse=d3_svg_lineStepBefore,d3.svg.area=function(){return d3_svg_area(Object)},d3.svg.area.radial=function(){var a=d3_svg_area(d3_svg_lineRadial);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a},d3.svg.chord=function(){function f(c,d){var e=g(this,a,c,d),f=g(this,b,c,d);return"M"+e.p0+i(e.r,e.p1,e.a1-e.a0)+(h(e,f)?j(e.r,e.p1,e.r,e.p0):j(e.r,e.p1,f.r,f.p0)+i(f.r,f.p1,f.a1-f.a0)+j(f.r,f.p1,e.r,e.p0))+"Z"}function g(a,b,f,g){var h=b.call(a,f,g),i=c.call(a,h,g),j=d.call(a,h,g)+d3_svg_arcOffset,k=e.call(a,h,g)+d3_svg_arcOffset;return{r:i,a0:j,a1:k,p0:[i*Math.cos(j),i*Math.sin(j)],p1:[i*Math.cos(k),i*Math.sin(k)]}}function h(a,b){return a.a0==b.a0&&a.a1==b.a1}function i(a,b,c){return"A"+a+","+a+" 0 "+ +(c>Math.PI)+",1 "+b}function j(a,b,c,d){return"Q 0,0 "+d}var a=d3_svg_chordSource,b=d3_svg_chordTarget,c=d3_svg_chordRadius,d=d3_svg_arcStartAngle,e=d3_svg_arcEndAngle;return f.radius=function(a){return arguments.length?(c=d3_functor(a),f):c},f.source=function(b){return arguments.length?(a=d3_functor(b),f):a},f.target=function(a){return arguments.length?(b=d3_functor(a),f):b},f.startAngle=function(a){return arguments.length?(d=d3_functor(a),f):d},f.endAngle=function(a){return arguments.length?(e=d3_functor(a),f):e},f},d3.svg.diagonal=function(){function d(d,e){var f=a.call(this,d,e),g=b.call(this,d,e),h=(f.y+g.y)/2,i=[f,{x:f.x,y:h},{x:g.x,y:h},g];return i=i.map(c),"M"+i[0]+"C"+i[1]+" "+i[2]+" "+i[3]}var a=d3_svg_chordSource,b=d3_svg_chordTarget,c=d3_svg_diagonalProjection;return d.source=function(b){return arguments.length?(a=d3_functor(b),d):a},d.target=function(a){return arguments.length?(b=d3_functor(a),d):b},d.projection=function(a){return arguments.length?(c=a,d):c},d},d3.svg.diagonal.radial=function(){var a=d3.svg.diagonal(),b=d3_svg_diagonalProjection,c=a.projection;return a.projection=function(a){return arguments.length?c(d3_svg_diagonalRadialProjection(b=a)):b},a},d3.svg.mouse=d3.mouse,d3.svg.touches=d3.touches,d3.svg.symbol=function(){function c(c,d){return(d3_svg_symbols.get(a.call(this,c,d))||d3_svg_symbolCircle)(b.call(this,c,d))}var a=d3_svg_symbolType,b=d3_svg_symbolSize;return c.type=function(b){return arguments.length?(a=d3_functor(b),c):a},c.size=function(a){return arguments.length?(b=d3_functor(a),c):b},c};var d3_svg_symbols=d3.map({circle:d3_svg_symbolCircle,cross:function(a){var b=Math.sqrt(a/5)/2;return"M"+ -3*b+","+ -b+"H"+ -b+"V"+ -3*b+"H"+b+"V"+ -b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+ -b+"V"+b+"H"+ -3*b+"Z"},diamond:function(a){var b=Math.sqrt(a/(2*d3_svg_symbolTan30)),c=b*d3_svg_symbolTan30;return"M0,"+ -b+"L"+c+",0"+" 0,"+b+" "+ -c+",0"+"Z"},square:function(a){var b=Math.sqrt(a)/2;return"M"+ -b+","+ -b+"L"+b+","+ -b+" "+b+","+b+" "+ -b+","+b+"Z"},"triangle-down":function(a){var b=Math.sqrt(a/d3_svg_symbolSqrt3),c=b*d3_svg_symbolSqrt3/2;return"M0,"+c+"L"+b+","+ -c+" "+ -b+","+ -c+"Z"},"triangle-up":function(a){var b=Math.sqrt(a/d3_svg_symbolSqrt3),c=b*d3_svg_symbolSqrt3/2;return"M0,"+ -c+"L"+b+","+c+" "+ -b+","+c+"Z"}});d3.svg.symbolTypes=d3_svg_symbols.keys();var d3_svg_symbolSqrt3=Math.sqrt(3),d3_svg_symbolTan30=Math.tan(30*Math.PI/180);d3.svg.axis=function(){function k(k){k.each(function(){var k=d3.select(this),l=h==null?a.ticks?a.ticks.apply(a,g):a.domain():h,m=i==null?a.tickFormat?a.tickFormat.apply(a,g):String:i,n=d3_svg_axisSubdivide(a,l,j),o=k.selectAll(".minor").data(n,String),p=o.enter().insert("line","g").attr("class","tick minor").style("opacity",1e-6),q=d3.transition(o.exit()).style("opacity",1e-6).remove(),r=d3.transition(o).style("opacity",1),s=k.selectAll("g").data(l,String),t=s.enter().insert("g","path").style("opacity",1e-6),u=d3.transition(s.exit()).style("opacity",1e-6).remove(),v=d3.transition(s).style("opacity",1),w,x=d3_scaleRange(a),y=k.selectAll(".domain").data([0]),z=y.enter().append("path").attr("class","domain"),A=d3.transition(y),B=a.copy(),C=this.__chart__||B;this.__chart__=B,t.append("line").attr("class","tick"),t.append("text"),v.select("text").text(m);switch(b){case"bottom":w=d3_svg_axisX,p.attr("y2",d),r.attr("x2",0).attr("y2",d),t.select("line").attr("y2",c),t.select("text").attr("y",Math.max(c,0)+f),v.select("line").attr("x2",0).attr("y2",c),v.select("text").attr("x",0).attr("y",Math.max(c,0)+f).attr("dy",".71em").attr("text-anchor","middle"),A.attr("d","M"+x[0]+","+e+"V0H"+x[1]+"V"+e);break;case"top":w=d3_svg_axisX,p.attr("y2",-d),r.attr("x2",0).attr("y2",-d),t.select("line").attr("y2",-c),t.select("text").attr("y",-(Math.max(c,0)+f)),v.select("line").attr("x2",0).attr("y2",-c),v.select("text").attr("x",0).attr("y",-(Math.max(c,0)+f)).attr("dy","0em").attr("text-anchor","middle"),A.attr("d","M"+x[0]+","+ -e+"V0H"+x[1]+"V"+ -e);break;case"left":w=d3_svg_axisY,p.attr("x2",-d),r.attr("x2",-d).attr("y2",0),t.select("line").attr("x2",-c),t.select("text").attr("x",-(Math.max(c,0)+f)),v.select("line").attr("x2",-c).attr("y2",0),v.select("text").attr("x",-(Math.max(c,0)+f)).attr("y",0).attr("dy",".32em").attr("text-anchor","end"),A.attr("d","M"+ -e+","+x[0]+"H0V"+x[1]+"H"+ -e);break;case"right":w=d3_svg_axisY,p.attr("x2",d),r.attr("x2",d).attr("y2",0),t.select("line").attr("x2",c),t.select("text").attr("x",Math.max(c,0)+f),v.select("line").attr("x2",c).attr("y2",0),v.select("text").attr("x",Math.max(c,0)+f).attr("y",0).attr("dy",".32em").attr("text-anchor","start"),A.attr("d","M"+e+","+x[0]+"H0V"+x[1]+"H"+e)}if(a.ticks)t.call(w,C),v.call(w,B),u.call(w,B),p.call(w,C),r.call(w,B),q.call(w,B);else{var D=B.rangeBand()/2,E=function(a){return B(a)+D};t.call(w,E),v.call(w,E)}})}var a=d3.scale.linear(),b="bottom",c=6,d=6,e=6,f=3,g=[10],h=null,i,j=0;return k.scale=function(b){return arguments.length?(a=b,k):a},k.orient=function(a){return arguments.length?(b=a,k):b},k.ticks=function(){return arguments.length?(g=arguments,k):g},k.tickValues=function(a){return arguments.length?(h=a,k):h},k.tickFormat=function(a){return arguments.length?(i=a,k):i},k.tickSize=function(a,b,f){if(!arguments.length)return c;var g=arguments.length-1;return c=+a,d=g>1?+b:c,e=g>0?+arguments[g]:c,k},k.tickPadding=function(a){return arguments.length?(f=+a,k):f},k.tickSubdivide=function(a){return arguments.length?(j=+a,k):j},k},d3.svg.brush=function(){function g(a){a.each(function(){var a=d3.select(this),e=a.selectAll(".background").data([0]),f=a.selectAll(".extent").data([0]),l=a.selectAll(".resize").data(d,String),m;a.style("pointer-events","all").on("mousedown.brush",k).on("touchstart.brush",k),e.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),f.enter().append("rect").attr("class","extent").style("cursor","move"),l.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return d3_svg_brushCursor[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),l.style("display",g.empty()?"none":null),l.exit().remove(),b&&(m=d3_scaleRange(b),e.attr("x",m[0]).attr("width",m[1]-m[0]),i(a)),c&&(m=d3_scaleRange(c),e.attr("y",m[0]).attr("height",m[1]-m[0]),j(a)),h(a)})}function h(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+e[+/e$/.test(a)][0]+","+e[+/^s/.test(a)][1]+")"})}function i(a){a.select(".extent").attr("x",e[0][0]),a.selectAll(".extent,.n>rect,.s>rect").attr("width",e[1][0]-e[0][0])}function j(a){a.select(".extent").attr("y",e[0][1]),a.selectAll(".extent,.e>rect,.w>rect").attr("height",e[1][1]-e[0][1])}function k(){function z(){var a=d3.event.changedTouches;return a?d3.touches(d,a)[0]:d3.mouse(d)}function A(){d3.event.keyCode==32&&(q||(r=null,s[0]-=e[1][0],s[1]-=e[1][1],q=2),d3_eventCancel())}function B(){d3.event.keyCode==32&&q==2&&(s[0]+=e[1][0],s[1]+=e[1][1],q=0,d3_eventCancel())}function C(){var a=z(),d=!1;t&&(a[0]+=t[0],a[1]+=t[1]),q||(d3.event.altKey?(r||(r=[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]),s[0]=e[+(a[0]<r[0])][0],s[1]=e[+(a[1]<r[1])][1]):r=null),o&&D(a,b,0)&&(i(m),d=!0),p&&D(a,c,1)&&(j(m),d=!0),d&&(h(m),l({type:"brush",mode:q?"move":"resize"}))}function D(a,b,c){var d=d3_scaleRange(b),g=d[0],h=d[1],i=s[c],j=e[1][c]-e[0][c],k,l;q&&(g-=i,h-=j+i),k=Math.max(g,Math.min(h,a[c])),q?l=(k+=i)+j:(r&&(i=Math.max(g,Math.min(h,2*r[c]-k))),i<k?(l=k,k=i):l=i);if(e[0][c]!==k||e[1][c]!==l)return f=null,e[0][c]=k,e[1][c]=l,!0}function E(){C(),m.style("pointer-events","all").selectAll(".resize").style("display",g.empty()?"none":null),d3.select("body").style("cursor",null),u.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),l({type:"brushend"}),d3_eventCancel()}var d=this,k=d3.select(d3.event.target),l=a.of(d,arguments),m=d3.select(d),n=k.datum(),o=!/^(n|s)$/.test(n)&&b,p=!/^(e|w)$/.test(n)&&c,q=k.classed("extent"),r,s=z(),t,u=d3.select(window).on("mousemove.brush",C).on("mouseup.brush",E).on("touchmove.brush",C).on("touchend.brush",E).on("keydown.brush",A).on("keyup.brush",B);if(q)s[0]=e[0][0]-s[0],s[1]=e[0][1]-s[1];else if(n){var v=+/w$/.test(n),w=+/^n/.test(n);t=[e[1-v][0]-s[0],e[1-w][1]-s[1]],s[0]=e[v][0],s[1]=e[w][1]}else d3.event.altKey&&(r=s.slice());m.style("pointer-events","none").selectAll(".resize").style("display",null),d3.select("body").style("cursor",k.style("cursor")),l({type:"brushstart"}),C(),d3_eventCancel()}var a=d3_eventDispatch(g,"brushstart","brush","brushend"),b=null,c=null,d=d3_svg_brushResizes[0],e=[[0,0],[0,0]],f;return g.x=function(a){return arguments.length?(b=a,d=d3_svg_brushResizes[!b<<1|!c],g):b},g.y=function(a){return arguments.length?(c=a,d=d3_svg_brushResizes[!b<<1|!c],g):c},g.extent=function(a){var d,h,i,j,k;return arguments.length?(f=[[0,0],[0,0]],b&&(d=a[0],h=a[1],c&&(d=d[0],h=h[0]),f[0][0]=d,f[1][0]=h,b.invert&&(d=b(d),h=b(h)),h<d&&(k=d,d=h,h=k),e[0][0]=d|0,e[1][0]=h|0),c&&(i=a[0],j=a[1],b&&(i=i[1],j=j[1]),f[0][1]=i,f[1][1]=j,c.invert&&(i=c(i),j=c(j)),j<i&&(k=i,i=j,j=k),e[0][1]=i|0,e[1][1]=j|0),g):(a=f||e,b&&(d=a[0][0],h=a[1][0],f||(d=e[0][0],h=e[1][0],b.invert&&(d=b.invert(d),h=b.invert(h)),h<d&&(k=d,d=h,h=k))),c&&(i=a[0][1],j=a[1][1],f||(i=e[0][1],j=e[1][1],c.invert&&(i=c.invert(i),j=c.invert(j)),j<i&&(k=i,i=j,j=k))),b&&c?[[d,i],[h,j]]:b?[d,h]:c&&[i,j])},g.clear=function(){return f=null,e[0][0]=e[0][1]=e[1][0]=e[1][1]=0,g},g.empty=function(){return b&&e[0][0]===e[1][0]||c&&e[0][1]===e[1][1]},d3.rebind(g,a,"on")};var d3_svg_brushCursor={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},d3_svg_brushResizes=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];